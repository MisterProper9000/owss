CREATE DATABASE motosh;

CREATE TABLE client
(
    id SERIAL PRIMARY KEY,
    first_name CHARACTER VARYING(150) NOT NULL,
    last_name CHARACTER VARYING(150) NOT NULL,
    email CHARACTER VARYING(100) UNIQUE NOT NULL,
    phone CHARACTER VARYING(100) NOT NULL,
    password CHARACTER VARYING(30) NOT NULL
);


CREATE TABLE lesser
(
    type CHARACTER VARYING(30) NOT NULL,
    id SERIAL PRIMARY KEY,
    first_name CHARACTER VARYING(300),
    last_name CHARACTER VARYING(300),
    company_name CHARACTER VARYING(300),
    email CHARACTER VARYING(40) UNIQUE NOT NULL,
    password CHARACTER VARYING(30) NOT NULL,
    phone CHARACTER VARYING(15) NOT NULL,
    address CHARACTER VARYING(150),
    sum_moto SMALLINT,
    bank_account CHARACTER VARYING(300)NOT NULL
);


CREATE TABLE motoroller
(
    id SERIAL PRIMARY KEY,
    auto_number CHARACTER VARYING(10) NOT NULL,
    model CHARACTER VARYING(60),
    id_owner INTEGER NOT NULL,
    insurance BOOLEAN DEFAULT FALSE,
    status boolean NOT NULL,
    FOREIGN KEY (id_owner) REFERENCES lesser(id)
      ON DELETE NO ACTION ON UPDATE CASCADE
);

CREATE TABLE ord
(
    id SERIAL PRIMARY KEY,
    begin_time CHARACTER VARYING(150),
    end_time CHARACTER VARYING(150),
    id_motor INTEGER NOT NULL,
    id_client INTEGER NOT NULL,
    cost REAL,
    tariff REAL,
    FOREIGN KEY (id_motor) REFERENCES motoroller(id)
      ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (id_client) REFERENCES client(id)
	ON DELETE NO ACTION ON UPDATE CASCADE
);